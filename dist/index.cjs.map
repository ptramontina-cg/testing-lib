{"version":3,"sources":["../src/index.ts","../src/strategies/backend/backend-image-validator.ts","../src/strategies/backend/backend-vast-validator.ts","../src/utils/backend-video-analyser.ts","../src/strategies/backend/backend-video-validator.ts","../src/strategies/backend/backend.strategy.ts","../src/constants/image.constants.ts","../src/utils/utils.ts","../src/strategies/frontend/frontend-image-validator.ts","../src/strategies/frontend/frontend-vast-validator.ts","../src/strategies/frontend/frontend-video-validator.ts","../src/strategies/frontend/frontend.strategy.ts","../src/main/creative-validator.ts"],"sourcesContent":["export { CreativeValidator } from \"./main/creative-validator\";\n","export class BackendImageValidator {\n  constructor(private file: Express.Multer.File) {}\n\n  async validate() {\n    console.log(this.file);\n    return true;\n  }\n}\n","export class BackendVastValidator {\n  constructor(private url: string) {}\n\n  async validate() {\n    console.log(this.url);\n    return true;\n  }\n}\n","import ffmpeg from \"fluent-ffmpeg\";\nimport streambuffer from \"stream-buffers\";\nimport fs from \"fs/promises\";\nimport path from \"path\";\nimport { VideoOrImageMetadata } from \"../types/validator\";\n\n// import { fileURLToPath } from \"url\";\n// const __filename = fileURLToPath(import.meta.url); // get the resolved path to the file\n// const __dirname = path.dirname(__filename); // get the name of the directory\n\nexport class BackendVideoAnalyser {\n  constructor() {\n    if (process.platform === \"win32\") {\n      ffmpeg.setFfmpegPath(\"C:/ffmpeg-master-latest-win64-gpl/bin/ffmpeg.exe\");\n      ffmpeg.setFfprobePath(\n        \"C:/ffmpeg-master-latest-win64-gpl/bin/ffprobe.exe\"\n      );\n    }\n  }\n\n  private getResolutionQuality(width: number, height: number): string {\n    if (width >= 3840 && height >= 2160) return \"4K\";\n    if (width >= 2048 && height >= 1080) return \"2K\";\n    if (width >= 1920 && height >= 1080) return \"Full HD\";\n    if (width >= 1280 && height >= 720) return \"HD\";\n    return \"SD\";\n  }\n\n  test() {\n    console.log(\"test from here\");\n    // console.log(ffmpeg);\n    // console.log(streambuffer);\n    console.log(fs);\n  }\n\n  /**\n   * Generates a screenshot from the middle of a video.\n   * @param {Object} file - Express file object containing video data.\n   * @returns {Promise<Buffer>} - A buffer of the generated screenshot.\n   */\n  private async generateThumbnail(file: Express.Multer.File): Promise<Buffer> {\n    const tempDir = path.join(__dirname, \"tmp\");\n    const tempInputPath = path.join(tempDir, `temp_${Date.now()}`);\n    const tempOutputPath = path.join(tempDir, `screenshot_${Date.now()}.png`);\n\n    await fs.mkdir(tempDir, { recursive: true });\n    await fs.writeFile(tempInputPath, file.buffer);\n\n    return new Promise((resolve, reject) => {\n      ffmpeg(tempInputPath)\n        .on(\"error\", async (err) => {\n          console.error(\"Error generating screenshot:\", err);\n          reject(err);\n        })\n        .on(\"end\", async () => {\n          try {\n            const screenshotBuffer = await fs.readFile(tempOutputPath);\n            await fs.unlink(tempInputPath).catch(() => {});\n            await fs.unlink(tempOutputPath).catch(() => {});\n            resolve(screenshotBuffer);\n          } catch (readError) {\n            reject(readError);\n          }\n        })\n        .screenshots({\n          timestamps: [\"50%\"],\n          filename: path.basename(tempOutputPath),\n          folder: tempDir,\n        });\n    });\n  }\n\n  async analyzeMediaBuffer(\n    file: Express.Multer.File\n  ): Promise<VideoOrImageMetadata> {\n    return new Promise((resolve, reject) => {\n      const readableStreamBuffer = new streambuffer.ReadableStreamBuffer({\n        frequency: 10,\n        chunkSize: 2048,\n      });\n\n      readableStreamBuffer.put(file.buffer);\n      readableStreamBuffer.stop();\n\n      ffmpeg(readableStreamBuffer).ffprobe(async (err, data) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n\n        const videoOrImageStream = data.streams.find(\n          (stream) =>\n            stream.codec_type === \"video\" || stream.codec_type === \"image\"\n        );\n\n        if (!videoOrImageStream) {\n          reject(new Error(\"No video or image stream found\"));\n          return;\n        }\n\n        const result: VideoOrImageMetadata = {\n          type: videoOrImageStream.codec_type + \"\",\n          resolution: {\n            width: videoOrImageStream.width as number,\n            height: videoOrImageStream.height as number,\n          },\n          format: data.format.format_name + \"\",\n        };\n\n        // Add video-specific properties and generate thumbnail if it's a video\n        if (file.mimetype.startsWith(\"video\")) {\n          result.durationInSeconds = videoOrImageStream.duration\n            ? Math.floor(parseFloat(videoOrImageStream.duration))\n            : undefined;\n          result.bitRate = Math.floor(\n            parseInt(videoOrImageStream.bit_rate + \"\") / 1024\n          );\n          result.resolution.quality = this.getResolutionQuality(\n            parseInt(videoOrImageStream.width + \"\"),\n            parseInt(videoOrImageStream.height + \"\")\n          );\n\n          const thumbnailBuffer = await this.generateThumbnail(file);\n          result.thumbnail = thumbnailBuffer;\n        }\n\n        resolve(result);\n      });\n    });\n  }\n}\n","import { BackendVideoAnalyser } from \"../../utils/backend-video-analyser\";\n\nexport class BackendVideoValidator {\n  constructor(private file: Express.Multer.File) {}\n\n  async validate() {\n    // console.log(this.file);\n\n    // const tsFile = new File([this.file.buffer], this.file.filename, {\n    //   type: this.file.mimetype,\n    // });\n\n    // const newBuffer = await tsFile.arrayBuffer();\n    // const buffer = Buffer.from(newBuffer); // Can be used in  StreamBuffers.ReadableStreamBuffer readableStreamBuffer.put(buffer);\n\n    const backendVideoAnalyser = new BackendVideoAnalyser();\n    backendVideoAnalyser.test();\n    // const result = await backendVideoAnalyser.analyzeMediaBuffer(this.file);\n\n    // console.log(result);\n\n    return true;\n  }\n}\n","import { ValidatorStrategy } from \"../../interfaces/validator.interface\";\nimport { AllowedFileTypes } from \"../../types/validator\";\nimport { BackendImageValidator } from \"./backend-image-validator\";\nimport { BackendVastValidator } from \"./backend-vast-validator\";\nimport { BackendVideoValidator } from \"./backend-video-validator\";\n\nexport class BackendValidatorStrategy implements ValidatorStrategy {\n  async validate(\n    type: AllowedFileTypes,\n    file?: File | Express.Multer.File | string\n  ): Promise<boolean> {\n    if ((type === \"image\" || type === \"video\") && !this.isMulterFile(file)) {\n      throw new Error(\"Invalid type for backend validation.\");\n    }\n\n    if (type === \"vast\" && !(file instanceof String)) {\n      throw new Error(\"Invalid type for backend validation.\");\n    }\n\n    switch (type) {\n      case \"image\":\n        return await this.validateImage(file as Express.Multer.File);\n      case \"video\":\n        return await this.validateVideo(file as Express.Multer.File);\n      case \"vast\":\n        return await this.validateVast(file as string);\n    }\n  }\n\n  private isMulterFile(object: any): object is Express.Multer.File {\n    return (\n      \"buffer\" in object &&\n      \"originalname\" in object &&\n      \"mimetype\" in object &&\n      \"size\" in object\n    );\n  }\n\n  private async validateVideo(file: Express.Multer.File): Promise<boolean> {\n    const backendVideoValidator = new BackendVideoValidator(file);\n    return await backendVideoValidator.validate();\n  }\n\n  private async validateImage(file: Express.Multer.File): Promise<boolean> {\n    const backendImageValidator = new BackendImageValidator(file);\n    return await backendImageValidator.validate();\n  }\n\n  private async validateVast(url: string): Promise<boolean> {\n    const backendVastValidator = new BackendVastValidator(url);\n    return await backendVastValidator.validate();\n  }\n}\n","export const MIN_HEIGHT = 50;\n\nexport const MAX_HEIGHT = 2000;\n\nexport const MIN_WIDTH = 50;\n\nexport const MAX_WIDTH = 2000;\n\nexport const ALLOWED_IMAGE_FORMATS = ['JPEG', 'JPG', 'PNG', 'GIF'];\n\nexport const MAX_SIZE = 100000000;\n","export function normalizeFileType(type: string): string {\n  return (type.includes(\"/\") ? type.split(\"/\")[1] : type).toUpperCase();\n}\n","import {\n  ALLOWED_IMAGE_FORMATS,\n  MAX_HEIGHT,\n  MAX_SIZE,\n  MAX_WIDTH,\n  MIN_HEIGHT,\n  MIN_WIDTH,\n} from \"../../constants/image.constants\";\nimport { normalizeFileType } from \"../../utils/utils\";\nexport class FrontendImageValidator {\n  constructor(private file: File) {}\n\n  async validate() {\n    console.log(this.file);\n\n    const img = await this.getImageFromFile(this.file);\n    console.log(img.width, img.height);\n\n    return true;\n  }\n\n  private validateSize() {\n    return this.file.size > MAX_SIZE;\n  }\n\n  private async validateResolution() {\n    const image = await this.getImageFromFile(this.file);\n    return (\n      image.width > MAX_WIDTH ||\n      image.width < MIN_WIDTH ||\n      image.height > MAX_HEIGHT ||\n      image.height < MIN_HEIGHT\n    );\n  }\n\n  private validateType() {\n    return ALLOWED_IMAGE_FORMATS.includes(normalizeFileType(this.file.type));\n  }\n\n  private async getImageFromFile(file: File): Promise<HTMLImageElement> {\n    return new Promise((resolve, reject) => {\n      file.arrayBuffer().then((arrayB) => {\n        const blob = new Blob([arrayB], { type: file.type });\n        const url = URL.createObjectURL(blob);\n\n        const img = new Image();\n        img.src = url;\n\n        img.onload = () => resolve(img);\n        img.onerror = reject;\n      });\n    });\n  }\n}\n","export class FrontendVastValidator {\n  constructor(private file: string) {}\n\n  async validate() {\n    console.log(this.file);\n    return true;\n  }\n}\n","export class FrontendVideoValidator {\n  constructor(private file: File) {}\n\n  async validate() {\n    console.log(this.file);\n    return true;\n  }\n}\n","import { ValidatorStrategy } from \"../../interfaces/validator.interface\";\nimport { AllowedFileTypes } from \"../../types/validator\";\nimport { FrontendImageValidator } from \"./frontend-image-validator\";\nimport { FrontendVastValidator } from \"./frontend-vast-validator\";\nimport { FrontendVideoValidator } from \"./frontend-video-validator\";\n\nexport class FrontendValidatorStrategy implements ValidatorStrategy {\n  async validate(\n    type: AllowedFileTypes,\n    file?: File | Express.Multer.File | string\n  ): Promise<boolean> {\n    if ((type === \"image\" || type === \"video\") && !this.isFile(file)) {\n      throw new Error(\"Invalid type for backend validation.\");\n    }\n\n    if (type === \"vast\" && !(file instanceof String)) {\n      throw new Error(\"Invalid type for backend validation.\");\n    }\n\n    switch (type) {\n      case \"image\":\n        return await this.validateImage(file as File);\n      case \"video\":\n        return await this.validateVideo(file as File);\n      case \"vast\":\n        return await this.validateVast(file as string);\n    }\n  }\n\n  private isFile(object: any): object is File {\n    return \"fileBits\" in object && \"fileName\" in object && \"options\" in object;\n  }\n\n  private async validateVideo(file: File): Promise<boolean> {\n    const frontendVideoValidator = new FrontendVideoValidator(file);\n    return await frontendVideoValidator.validate();\n  }\n\n  private async validateImage(file: File): Promise<boolean> {\n    const frontendImageValidator = new FrontendImageValidator(file);\n    return await frontendImageValidator.validate();\n  }\n\n  private async validateVast(url: string): Promise<boolean> {\n    const frontendVastValidator = new FrontendVastValidator(url);\n    return await frontendVastValidator.validate();\n  }\n}\n","import { ValidatorStrategy } from \"../interfaces/validator.interface\";\nimport { BackendValidatorStrategy } from \"../strategies/backend/backend.strategy\";\nimport { FrontendValidatorStrategy } from \"../strategies/frontend/frontend.strategy\";\nimport { AllowedFileTypes, AllowedValitators } from \"../types/validator\";\n\nexport class CreativeValidator {\n  private validatorStrategy: ValidatorStrategy;\n\n  constructor(validationType: AllowedValitators) {\n    this.validatorStrategy =\n      validationType === \"backend\"\n        ? new BackendValidatorStrategy()\n        : new FrontendValidatorStrategy();\n  }\n\n  async validate(\n    type: AllowedFileTypes,\n    file: File | Express.Multer.File | string\n  ) {\n    return await this.validatorStrategy.validate(type, file);\n  }\n}\n"],"mappings":"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","names":["ffmpeg","fs","path","streambuffer"]}